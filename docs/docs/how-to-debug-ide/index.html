<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Debugging IDE with MCP Steroid | MCP Steroid - Give AI the whole IDE, not just the files</title>
<meta name=description content="A comprehensive guide for AI agents to debug IntelliJ-based IDEs using the debugger and MCP Steroid"><meta property="og:type" content="website"><meta property="og:url" content="https://mcp-steroid.jonnyzzz.com/docs/how-to-debug-ide/"><meta property="og:title" content="Debugging IDE with MCP Steroid | MCP Steroid - Give AI the whole IDE, not just the files"><meta property="og:description" content="A comprehensive guide for AI agents to debug IntelliJ-based IDEs using the debugger and MCP Steroid"><meta property="og:image" content="https://mcp-steroid.jonnyzzz.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Debugging IDE with MCP Steroid | MCP Steroid - Give AI the whole IDE, not just the files"><meta name=twitter:description content="A comprehensive guide for AI agents to debug IntelliJ-based IDEs using the debugger and MCP Steroid"><meta name=twitter:image content="https://mcp-steroid.jonnyzzz.com/og-image.png"><link rel=icon type=image/svg+xml href=/pluginIcon.svg><link rel=stylesheet href=/css/site.css><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "dd1a589b6e154b0a985f8f14ca8c4a4a"}'></script><script>!function(e,t){var n,s,o,i;t.__SV||window.posthog&&window.posthog.__loaded||(window.posthog=t,t._i=[],t.init=function(a,r,c){function d(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(n=e.createElement("script")).type="text/javascript",n.crossOrigin="anonymous",n.async=!0,n.src=r.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(i=e.getElementsByTagName("script")[0]).parentNode.insertBefore(n,i);var l=t;for(void 0!==c?l=t[c]=[]:c="posthog",l.people=l.people||[],l.toString=function(e){var t="posthog";return"posthog"!==c&&(t+="."+c),e||(t+=" (stub)"),t},l.people.toString=function(){return l.toString(1)+".people (stub)"},o="init rs ls wi ns us ts ss capture calculateEventProperties vs register register_once register_for_session unregister unregister_for_session gs getFeatureFlag getFeatureFlagPayload getFeatureFlagResult isFeatureEnabled reloadFeatureFlags updateFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey cancelPendingSurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException startExceptionAutocapture stopExceptionAutocapture loadToolbar get_property getSessionProperty fs ds createPersonProfile setInternalOrTestUser ps Qr opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing hs debug M cs getPageViewId captureTraceFeedback captureTraceMetric Kr".split(" "),s=0;s<o.length;s++)d(l,o[s]);t._i.push([a,r,c])},t.__SV=1)}(document,window.posthog||[]),posthog.init("phc_IPtbjwwy9YIGg0YNHNxYBePijvTvHEcKAjohah6obYW",{api_host:"https://us.i.posthog.com",defaults:"2025-11-30",person_profiles:"identified_only"})</script></head><body><a href=#main-content class=skip-link>Skip to main content</a><nav class=nav><div class=nav-container><a href=/ class=nav-brand><img src=/pluginIcon.svg alt="MCP Steroid" class=nav-logo>
<span class=nav-title>MCP Steroid</span>
</a><button class=nav-toggle aria-label="Toggle navigation"><svg viewBox="0 0 24 24" fill="currentcolor"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></button><div class=nav-links><a href=/ class=nav-link>Home
</a><a href=/docs/ class=nav-link>Docs
</a><a href=/releases/ class=nav-link>Releases
</a><a href=/docs/strategy/ class=nav-link>Strategy
</a><a href=https://mcp-steroid.slack.com class=nav-link target=_blank rel=noopener>Slack Community
<svg viewBox="0 0 24 24" fill="currentcolor"><path d="M19 19H5V5h7V3H5c-1.11.0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1.0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg>
</a><a href=https://github.com/jonnyzzz/mcp-steroid/issues class=nav-link target=_blank rel=noopener>GitHub Issues<svg viewBox="0 0 24 24" fill="currentcolor"><path d="M19 19H5V5h7V3H5c-1.11.0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1.0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg></a></div></div></nav><main class=main-content id=main-content><div class=docs-layout><aside class=docs-sidebar><h3>Documentation</h3><div class=sidebar-group><span class=sidebar-group-label>Getting Started</span><ul><li><a href=/docs/getting-started/>Getting Started</a></li><li><a href=/docs/need-your-experiments-and-support/>Support the Project</a></li></ul></div><div class=sidebar-group><span class=sidebar-group-label>Vision</span><ul><li><a href=/docs/how-it-works/>How it works</a></li><li><a href=/docs/strategy/>Strategy</a></li><li><a href=/docs/project-assessment-2026-02-22/>Project Assessment — 2026-02-22</a></li><li><a href=/docs/learning-methodology/>Reinforced Learning Approach</a></li></ul></div><div class=sidebar-group><span class=sidebar-group-label>Reference</span><ul><li><a href=/docs/settings-connection-info/>Connect your AI Agents</a></li><li><a href=/docs/configuration/>MCP Steroid Configuration</a></li><li><a href=/docs/code-review/>Review AI Code Execution</a></li></ul></div><div class=sidebar-group><span class=sidebar-group-label>Examples</span><ul><li><a href=/docs/how-to-debug-ide/ class=active>Debugging IDE with MCP Steroid</a></li></ul></div></aside><article class=docs-content><h1>Debugging IDE with MCP Steroid</h1><blockquote><p><strong>This documentation was written entirely by AI agents</strong> using MCP Steroid while working on the IntelliJ Platform codebase. It demonstrates what autonomous AI agents can discover and document when given full IDE access through MCP Steroid.</p><p><strong>Note:</strong> Specific plugin names, paths, and internal details have been redacted. Replace placeholders like <code>YOUR_PLUGIN_ID</code>, <code>YourAction</code>, and example paths with your actual values.</p></blockquote><p><strong>Guide for AI Agents:</strong> Debugging IntelliJ-based IDEs (CLion, IDEA, Rider, etc.) using IntelliJ&rsquo;s debugger</p><p><strong>Date:</strong> 2026-01-31
<strong>Audience:</strong> AI agents working with IntelliJ Platform development</p><hr><h2 id=overview>Overview</h2><p>This guide explains how an AI agent can debug an IntelliJ-based IDE (like CLion) by:</p><ol><li>Launching the IDE in debug mode from IntelliJ IDEA</li><li>Using the MCP Steroid to interact with the debugged IDE</li><li>Taking screenshots to observe UI state</li><li>Using the debugger to inject code and inspect runtime state</li><li>Testing plugin functionality programmatically</li></ol><p><strong>Use Case:</strong> Validating a plugin in the target IDE while having full debugger control</p><hr><h2 id=setup-two-ides-working-together>Setup: Two IDEs Working Together</h2><h3 id=the-architecture>The Architecture</h3><pre tabindex=0><code>┌─────────────────────────────────────┐
│  IntelliJ IDEA (Debugger Host)      │
│                                     │
│  - intellij project open            │
│  - Run Configurations available     │
│  - Debugger UI active               │
│  - MCP Steroid connected            │
│  - Can execute Kotlin code          │
│  - Can set breakpoints              │
└────────────┬────────────────────────┘
             │ JDWP Debug Connection
             │ (port 60228, etc.)
             ▼
┌─────────────────────────────────────┐
│  Target IDE (Debugged)              │
│                                     │
│  - Running with -agentlib:jdwp      │
│  - Plugin under test loaded         │
│  - UI may be visible or headless    │
│  - Fully controllable via debugger  │
│  - State inspectable                │
└─────────────────────────────────────┘
</code></pre><p><strong>Key Insight:</strong> IntelliJ IDEA becomes your &ldquo;control center&rdquo; for debugging any target IDE</p><hr><h2 id=step-by-step-launch-ide-in-debug-mode>Step-by-Step: Launch IDE in Debug Mode</h2><h3 id=step-1-identify-available-run-configurations>Step 1: Identify Available Run Configurations</h3><p><strong>Using MCP Steroid:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.execution.RunManager
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> runManager = <span style=color:#a6e22e>RunManager</span>.getInstance(project)
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> allConfigs = runManager.allSettings
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>println(<span style=color:#e6db74>&#34;Available run configurations:&#34;</span>)
</span></span><span style=display:flex><span>allConfigs.forEach { config <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;  - </span><span style=color:#e6db74>${config.name}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>What to Look For:</strong></p><ul><li>&ldquo;CLion (dev build)&rdquo;</li><li>&ldquo;IDEA (dev build)&rdquo;</li><li>&ldquo;Rider (dev build)&rdquo;</li><li>Any configuration with <code>DevMainKt</code> as main class</li></ul><p><strong>Example Output:</strong></p><pre tabindex=0><code>Available run configurations:
  - CLion (dev build)
  - IDEA Ultimate
  - Android Studio
  - Rider (dev build)
</code></pre><h3 id=step-2-launch-in-debug-mode-programmatically>Step 2: Launch in Debug Mode Programmatically</h3><p><strong>Code to Execute via MCP Steroid:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.execution.RunManager
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.execution.ProgramRunnerUtil
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.execution.executors.DefaultDebugExecutor
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.openapi.application.ApplicationManager
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Find the target IDE configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> runManager = <span style=color:#a6e22e>RunManager</span>.getInstance(project)
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> targetConfig = runManager.allSettings.find {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>it</span>.name <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;TARGET_IDE (dev build)&#34;</span>  <span style=color:#75715e>// Replace with your config name
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (targetConfig <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;Found configuration: </span><span style=color:#e6db74>${targetConfig.name}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Get debug executor
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>val</span> debugExecutor = <span style=color:#a6e22e>DefaultDebugExecutor</span>.getDebugExecutorInstance()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Launch in debug mode (asynchronously on EDT)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>ApplicationManager</span>.getApplication().invokeLater {
</span></span><span style=display:flex><span>        println(<span style=color:#e6db74>&#34;Launching </span><span style=color:#e6db74>${targetConfig.name}</span><span style=color:#e6db74> in debug mode...&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ProgramRunnerUtil</span>.executeConfiguration(targetConfig, debugExecutor)
</span></span><span style=display:flex><span>        println(<span style=color:#e6db74>&#34;Debug session started&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;Configuration not found&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>What This Does:</strong></p><ol><li>Finds the run configuration by name</li><li>Gets the debug executor (not the run executor)</li><li>Launches the configuration with debugger attached</li><li>Returns immediately (async launch)</li></ol><p><strong>Expected Result:</strong></p><ul><li>Target IDE starts with debugger attached</li><li>Debug panel in IntelliJ shows connection</li><li>Debug port displayed (e.g., 127.0.0.1:60228)</li><li>Can see debugger output in Console tab</li></ul><h3 id=step-3-wait-for-ide-to-start>Step 3: Wait for IDE to Start</h3><p><strong>Important:</strong> The IDE launch is asynchronous!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#75715e>// After launching, wait for process to appear
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> kotlin.system.measureTimeMillis
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>println(<span style=color:#e6db74>&#34;Waiting for target IDE to start...&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> startTime = <span style=color:#a6e22e>System</span>.currentTimeMillis()
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> timeout = <span style=color:#ae81ff>120</span>_000 <span style=color:#75715e>// 2 minutes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> (<span style=color:#a6e22e>System</span>.currentTimeMillis() - startTime &lt; timeout) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Thread</span>.sleep(<span style=color:#ae81ff>2000</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Check if process is running (you can parse logs or check PIDs)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    println(<span style=color:#e6db74>&#34;  Waiting... (</span><span style=color:#e6db74>${(System.currentTimeMillis() - startTime) / 1000}</span><span style=color:#e6db74>s elapsed)&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>println(<span style=color:#e6db74>&#34;Target IDE should be running now&#34;</span>)
</span></span></code></pre></div><p><strong>Better Approach:</strong> Monitor logs or use process checking</p><hr><h2 id=interacting-with-the-debugged-ide>Interacting with the Debugged IDE</h2><h3 id=method-1-using-mcp-steroid>Method 1: Using MCP Steroid</h3><p><strong>Take Screenshots:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#75715e>// Via MCP Steroid tool
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>steroid_take_screenshot(
</span></span><span style=display:flex><span>    project_name: <span style=color:#e6db74>&#34;intellij&#34;</span>,
</span></span><span style=display:flex><span>    task_id: <span style=color:#e6db74>&#34;debug-validation&#34;</span>,
</span></span><span style=display:flex><span>    reason: <span style=color:#e6db74>&#34;Capture target IDE UI state&#34;</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p><strong>Result:</strong></p><ul><li>Screenshot saved to <code>.idea/mcp-steroid/[execution-id]/screenshot.png</code></li><li>Component tree saved to <code>screenshot-tree.md</code></li><li>Metadata in <code>screenshot-meta.json</code></li></ul><p><strong>Use Case:</strong> Visual verification of UI state, dialogs, panels</p><h3 id=method-2-execute-code-in-running-ide>Method 2: Execute Code in Running IDE</h3><p><strong>Inject Code via Debugger:</strong></p><p>When target IDE is paused at a breakpoint, you can execute code in its context:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#75715e>// This code runs IN the target IDE&#39;s JVM, not IntelliJ&#39;s
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> com.intellij.openapi.project.ProjectManager
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.ide.plugins.PluginManagerCore
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.openapi.extensions.PluginId
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Get all open projects in target IDE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> projects = <span style=color:#a6e22e>ProjectManager</span>.getInstance().openProjects
</span></span><span style=display:flex><span>println(<span style=color:#e6db74>&#34;Target IDE has </span><span style=color:#e6db74>${projects.size}</span><span style=color:#e6db74> open projects:&#34;</span>)
</span></span><span style=display:flex><span>projects.forEach { p <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;  - </span><span style=color:#e6db74>${p.name}</span><span style=color:#e6db74> at </span><span style=color:#e6db74>${p.basePath}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Check plugin status IN target IDE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> pluginId = <span style=color:#a6e22e>PluginId</span>.getId(<span style=color:#e6db74>&#34;YOUR_PLUGIN_ID&#34;</span>)  <span style=color:#75715e>// Replace with your plugin ID
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> plugin = <span style=color:#a6e22e>PluginManagerCore</span>.getPlugin(pluginId)
</span></span><span style=display:flex><span>println(<span style=color:#e6db74>&#34;Plugin:&#34;</span>)
</span></span><span style=display:flex><span>println(<span style=color:#e6db74>&#34;  Loaded: </span><span style=color:#e6db74>${plugin != null}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>println(<span style=color:#e6db74>&#34;  Enabled: </span><span style=color:#e6db74>${plugin?.isEnabled}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>println(<span style=color:#e6db74>&#34;  Version: </span><span style=color:#e6db74>${plugin?.version}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><p><strong>How to Execute:</strong></p><ol><li>Set a breakpoint in target IDE code (e.g., in your plugin)</li><li>Trigger the breakpoint (perform an action, open a file, etc.)</li><li>When paused, open &ldquo;Evaluate Expression&rdquo; in IntelliJ (Alt+F8)</li><li>Paste code above</li><li>Execute in target IDE&rsquo;s context</li></ol><p><strong>Power Move:</strong> You can modify target IDE&rsquo;s state from the debugger!</p><h3 id=method-3-set-breakpoints-programmatically>Method 3: Set Breakpoints Programmatically</h3><p><strong>Add Breakpoints Before Launch:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.xdebugger.XDebuggerManager
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.xdebugger.breakpoints.XLineBreakpointType
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.openapi.vfs.VfsUtil
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> java.nio.file.Paths
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Set a breakpoint in your plugin code
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> file = <span style=color:#a6e22e>VfsUtil</span>.findFile(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Paths</span>.<span style=color:#66d9ef>get</span>(
</span></span><span style=display:flex><span>        project.basePath<span style=color:#f92672>!!</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;plugins/your-plugin/src/com/example/YourAction.kt&#34;</span>  <span style=color:#75715e>// Replace with your path
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    ),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>file</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>val</span> breakpointManager = <span style=color:#a6e22e>XDebuggerManager</span>.getInstance(project).breakpointManager
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>val</span> lineBreakpointType = <span style=color:#a6e22e>XLineBreakpointType</span>.EXTENSION_POINT_NAME
</span></span><span style=display:flex><span>        .extensionList
</span></span><span style=display:flex><span>        .firstOrNull { <span style=color:#66d9ef>it</span> <span style=color:#66d9ef>is</span> XLineBreakpointType }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (lineBreakpointType <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>val</span> breakpoint = breakpointManager.addLineBreakpoint(
</span></span><span style=display:flex><span>            lineBreakpointType,
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>file</span>.url,
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>35</span>, <span style=color:#75715e>// line number - adjust as needed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>null</span> <span style=color:#75715e>// condition
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        )
</span></span><span style=display:flex><span>        println(<span style=color:#e6db74>&#34;Breakpoint set&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Use Case:</strong> Automatically pause when specific code executes in target IDE</p><hr><h2 id=observing-the-debugged-ide>Observing the Debugged IDE</h2><h3 id=check-process-status>Check Process Status</h3><p><strong>From Shell:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Find target IDE process</span>
</span></span><span style=display:flex><span>ps aux | grep <span style=color:#e6db74>&#34;DevMainKt&#34;</span> | grep -v grep
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Expected output:</span>
</span></span><span style=display:flex><span><span style=color:#75715e># user  57870  0.6  2.7  444234672  3617568  ?? S  9:31AM  1:52.07 /path/to/java -agentlib:jdwp=... DevMainKt</span>
</span></span></code></pre></div><p><strong>Extract Debug Port:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ps aux | grep <span style=color:#e6db74>&#34;DevMainKt&#34;</span> | grep -o <span style=color:#e6db74>&#34;address=[^,]*&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Output: address=127.0.0.1:60228</span>
</span></span></code></pre></div><h3 id=monitor-logs>Monitor Logs</h3><p><strong>Target IDE&rsquo;s logs location:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Logs directory (adjust path for your IDE)</span>
</span></span><span style=display:flex><span>ls -la ~/Library/Logs/JetBrains/TARGET_IDE/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Main log file</span>
</span></span><span style=display:flex><span>tail -f ~/Library/Logs/JetBrains/TARGET_IDE/idea.log
</span></span></code></pre></div><p><strong>Search for plugin activity:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Look for your plugin activity</span>
</span></span><span style=display:flex><span>grep -i <span style=color:#e6db74>&#34;your-plugin&#34;</span> idea.log | tail -20
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Look for errors</span>
</span></span><span style=display:flex><span>grep -i <span style=color:#e6db74>&#34;error\|exception&#34;</span> idea.log | tail -10
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check plugin loading</span>
</span></span><span style=display:flex><span>grep <span style=color:#e6db74>&#34;Loaded bundled plugins&#34;</span> idea.log
</span></span></code></pre></div><h3 id=check-window-visibility>Check Window Visibility</h3><p><strong>Using AppleScript (macOS):</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>osascript <span style=color:#e6db74>&lt;&lt; &#39;EOF&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>tell application &#34;System Events&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    set javaProc to first process whose name is &#34;java&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    set winCount to count of windows of javaProc
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    if winCount &gt; 0 then
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        repeat with win in windows of javaProc
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            log &#34;Window: &#34; &amp; (name of win)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        end repeat
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        return &#34;Found &#34; &amp; winCount &amp; &#34; windows&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    else
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        return &#34;No visible windows (headless mode)&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    end if
</span></span></span><span style=display:flex><span><span style=color:#e6db74>end tell
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><p><strong>Result tells you:</strong></p><ul><li>Visible: Can use UI automation</li><li>Headless: Must use programmatic approaches only</li></ul><hr><h2 id=testing-plugin-functionality>Testing Plugin Functionality</h2><h3 id=approach-1-programmatic-invocation>Approach 1: Programmatic Invocation</h3><p><strong>Trigger Actions Programmatically:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.openapi.actionSystem.ActionManager
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.openapi.actionSystem.AnActionEvent
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.openapi.actionSystem.CommonDataKeys
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.openapi.actionSystem.impl.SimpleDataContext
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.openapi.project.ProjectManager
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Get the target project
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> targetProjects = <span style=color:#a6e22e>ProjectManager</span>.getInstance().openProjects
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> targetProject = targetProjects.firstOrNull()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (targetProject <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Get action by ID
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>val</span> actionManager = <span style=color:#a6e22e>ActionManager</span>.getInstance()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>val</span> myAction = actionManager.getAction(<span style=color:#e6db74>&#34;YourPlugin.YourAction&#34;</span>)  <span style=color:#75715e>// Replace with your action ID
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (myAction <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>        println(<span style=color:#e6db74>&#34;Action found: </span><span style=color:#e6db74>${myAction.javaClass.name}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Create action event
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>val</span> dataContext = <span style=color:#a6e22e>SimpleDataContext</span>.builder()
</span></span><span style=display:flex><span>            .add(<span style=color:#a6e22e>CommonDataKeys</span>.PROJECT, targetProject)
</span></span><span style=display:flex><span>            .build()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>val</span> event = <span style=color:#a6e22e>AnActionEvent</span>.createFromDataContext(
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;test-invocation&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>            dataContext
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Invoke action
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        myAction.actionPerformed(event)
</span></span><span style=display:flex><span>        println(<span style=color:#e6db74>&#34;Action invoked&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Limitation:</strong> This runs in IntelliJ&rsquo;s context, not the target IDE&rsquo;s</p><h3 id=approach-2-debugger-code-injection>Approach 2: Debugger Code Injection</h3><p><strong>When Target IDE is Running:</strong></p><ol><li>Open IntelliJ&rsquo;s debug console</li><li>Switch to target IDE&rsquo;s process</li><li>Execute code IN target IDE:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#75715e>// This executes in target IDE&#39;s JVM
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> com.intellij.openapi.actionSystem.ActionManager
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.openapi.project.ProjectManager
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> projects = <span style=color:#a6e22e>ProjectManager</span>.getInstance().openProjects
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (projects.isNotEmpty()) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>val</span> project = projects[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>val</span> actionManager = <span style=color:#a6e22e>ActionManager</span>.getInstance()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// List all registered actions containing your keyword
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>val</span> allActions = actionManager.getActionIdList(<span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>val</span> matchingActions = allActions.filter {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>it</span>.contains(<span style=color:#e6db74>&#34;YourKeyword&#34;</span>, ignoreCase = <span style=color:#66d9ef>true</span>)  <span style=color:#75715e>// Replace with your keyword
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;Matching actions in target IDE:&#34;</span>)
</span></span><span style=display:flex><span>    matchingActions.forEach { actionId <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>val</span> action = actionManager.getAction(actionId)
</span></span><span style=display:flex><span>        println(<span style=color:#e6db74>&#34;  - </span><span style=color:#e6db74>$actionId</span><span style=color:#e6db74>: </span><span style=color:#e6db74>${action?.javaClass?.name}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>This shows:</strong> What actions are actually available in the running target IDE</p><h3 id=approach-3-state-file-manipulation>Approach 3: State File Manipulation</h3><p><strong>Modify Plugin State Files:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create a plugin state file</span>
</span></span><span style=display:flex><span>cat &gt; /path/to/project/.idea/yourPlugin.xml <span style=color:#e6db74>&lt;&lt; &#39;EOF&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;project version=&#34;4&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  &lt;component name=&#34;YourPluginService&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;!-- Your plugin state here --&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  &lt;/component&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;/project&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Target IDE will detect file change and reload</span>
</span></span></code></pre></div><p><strong>Result:</strong> Plugin reacts to state changes</p><hr><h2 id=debugging-workflow-example>Debugging Workflow Example</h2><h3 id=complete-example-validate-plugin>Complete Example: Validate Plugin</h3><p><strong>Step 1: Launch Target IDE in Debug Mode</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>val</span> runManager = <span style=color:#a6e22e>RunManager</span>.getInstance(project)
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> targetConfig = runManager.allSettings.find { <span style=color:#66d9ef>it</span>.name <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;TARGET_IDE (dev build)&#34;</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (targetConfig <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>val</span> debugExecutor = <span style=color:#a6e22e>DefaultDebugExecutor</span>.getDebugExecutorInstance()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ApplicationManager</span>.getApplication().invokeLater {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ProgramRunnerUtil</span>.executeConfiguration(targetConfig, debugExecutor)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;Target IDE launching in debug mode&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Step 2: Wait for Startup</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Monitor log for startup completion</span>
</span></span><span style=display:flex><span>tail -f ~/Library/Logs/JetBrains/TARGET_IDE/idea.log | grep <span style=color:#e6db74>&#34;Loaded bundled plugins&#34;</span>
</span></span></code></pre></div><p><strong>Step 3: Set Breakpoint in Plugin Code</strong></p><p>In IntelliJ, navigate to your plugin&rsquo;s action class and click the gutter to set a breakpoint.</p><p><strong>Step 4: Trigger Action in Target IDE</strong></p><p>Perform the action in the target IDE that triggers your plugin code.</p><p><strong>Step 5: Breakpoint Hits in IntelliJ</strong></p><p>When target IDE executes the code:</p><ol><li>IntelliJ debugger pauses execution</li><li>You see target IDE&rsquo;s code in IntelliJ&rsquo;s editor</li><li>Variables panel shows target IDE&rsquo;s runtime state</li><li>You can step through code, inspect variables, etc.</li></ol><p><strong>Step 6: Inspect State via Debugger</strong></p><p>In IntelliJ&rsquo;s &ldquo;Evaluate Expression&rdquo; (Alt+F8):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#75715e>// Show current project
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>project.name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Show selected file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>virtualFile<span style=color:#f92672>?.</span>path
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Read file content
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> content = virtualFile<span style=color:#f92672>?.</span>inputStream<span style=color:#f92672>?.</span>readBytes()
</span></span><span style=display:flex><span>println(<span style=color:#e6db74>&#34;File size: </span><span style=color:#e6db74>${content?.size}</span><span style=color:#e6db74> bytes&#34;</span>)
</span></span></code></pre></div><p><strong>Step 7: Step Through Execution</strong></p><p>Use debugger controls:</p><ul><li>F8: Step Over</li><li>F7: Step Into</li><li>Shift+F8: Step Out</li><li>F9: Resume</li></ul><p><strong>Step 8: Verify Success</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Check logs for successful operation</span>
</span></span><span style=display:flex><span>grep <span style=color:#e6db74>&#34;your-plugin&#34;</span> ~/Library/Logs/JetBrains/TARGET_IDE/idea.log | tail -5
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Look for errors</span>
</span></span><span style=display:flex><span>grep <span style=color:#e6db74>&#34;ERROR\|Exception&#34;</span> ~/Library/Logs/JetBrains/TARGET_IDE/idea.log | tail -5
</span></span></code></pre></div><hr><h2 id=visual-verification>Visual Verification</h2><h3 id=take-screenshot-of-target-ide>Take Screenshot of Target IDE</h3><p><strong>Using MCP Steroid (from IntelliJ):</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#75715e>// This is a tool call, not Kotlin code
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>steroid_take_screenshot(
</span></span><span style=display:flex><span>    project_name: <span style=color:#e6db74>&#34;intellij&#34;</span>,
</span></span><span style=display:flex><span>    task_id: <span style=color:#e6db74>&#34;validation&#34;</span>,
</span></span><span style=display:flex><span>    reason: <span style=color:#e6db74>&#34;Capture target IDE UI state&#34;</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p><strong>Result:</strong></p><ul><li>Screenshot of IntelliJ (not target IDE directly)</li><li>Shows debugger state, console output</li><li>Component tree shows UI elements</li></ul><p><strong>For target IDE specifically (macOS):</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Use macOS screencapture</span>
</span></span><span style=display:flex><span>screencapture -w /tmp/target-ide-screenshot.png
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># -w: Capture specific window (interactive selection)</span>
</span></span></code></pre></div><h3 id=analyze-component-tree>Analyze Component Tree</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Read component tree from screenshot</span>
</span></span><span style=display:flex><span>cat .idea/mcp-steroid/<span style=color:#f92672>[</span>execution-id<span style=color:#f92672>]</span>/screenshot-tree.md
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Look for specific components</span>
</span></span><span style=display:flex><span>grep -i <span style=color:#e6db74>&#34;your-component&#34;</span> screenshot-tree.md
</span></span></code></pre></div><hr><h2 id=advanced-inject-code-via-debugger>Advanced: Inject Code via Debugger</h2><h3 id=scenario-test-a-feature>Scenario: Test a Feature</h3><p><strong>Goal:</strong> Verify a specific feature works correctly</p><p><strong>Step 1: Set Breakpoint</strong></p><p>In your plugin code at the relevant method:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>processData</span>(text: String): String {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Breakpoint HERE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Your processing logic
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> processedText
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Step 2: Trigger the Feature</strong></p><p>Create test data and trigger the feature in target IDE.</p><p><strong>Step 3: Inspect in Debugger</strong></p><p>When paused at breakpoint:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#75715e>// In Evaluate Expression:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>text  <span style=color:#75715e>// See input value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Check intermediate results
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> result = processData(text)
</span></span><span style=display:flex><span>result  <span style=color:#75715e>// See output
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Verify it worked
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>result.contains(<span style=color:#e6db74>&#34;expected&#34;</span>)  <span style=color:#75715e>// true
</span></span></span></code></pre></div><p><strong>Step 4: Modify Behavior (Advanced)</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#75715e>// You can even CHANGE the code while debugging!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// In Evaluate Expression, execute:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;MODIFIED: </span><span style=color:#e6db74>$text</span><span style=color:#e6db74>&#34;</span>  <span style=color:#75715e>// Custom return value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Then press F9 to resume with YOUR return value
</span></span></span></code></pre></div><p><strong>Result:</strong> You can test and modify features in real-time!</p><hr><h2 id=common-patterns>Common Patterns</h2><h3 id=pattern-1-verify-plugin-loaded>Pattern 1: Verify Plugin Loaded</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.ide.plugins.PluginManagerCore
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.openapi.extensions.PluginId
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> pluginId = <span style=color:#a6e22e>PluginId</span>.getId(<span style=color:#e6db74>&#34;YOUR_PLUGIN_ID&#34;</span>)  <span style=color:#75715e>// Replace with your plugin ID
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> plugin = <span style=color:#a6e22e>PluginManagerCore</span>.getPlugin(pluginId)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (plugin <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> plugin.isEnabled) {
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;Plugin loaded: </span><span style=color:#e6db74>${plugin.name}</span><span style=color:#e6db74> v</span><span style=color:#e6db74>${plugin.version}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;Plugin not loaded or disabled&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=pattern-2-check-class-accessibility>Pattern 2: Check Class Accessibility</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>val</span> clazz = <span style=color:#a6e22e>Class</span>.forName(<span style=color:#e6db74>&#34;com.example.YourAction&#34;</span>)  <span style=color:#75715e>// Replace with your class
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    println(<span style=color:#e6db74>&#34;Class accessible: </span><span style=color:#e6db74>${clazz.name}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>catch</span> (e: ClassNotFoundException) {
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;Class not found: </span><span style=color:#e6db74>${e.message}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=pattern-3-list-all-actions>Pattern 3: List All Actions</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>import</span> com.intellij.openapi.actionSystem.ActionManager
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> actionManager = <span style=color:#a6e22e>ActionManager</span>.getInstance()
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> allActionIds = actionManager.getActionIdList(<span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> matchingActions = allActionIds.filter {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>it</span>.contains(<span style=color:#e6db74>&#34;YourKeyword&#34;</span>, ignoreCase = <span style=color:#66d9ef>true</span>)  <span style=color:#75715e>// Replace with your keyword
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>println(<span style=color:#e6db74>&#34;Matching actions (</span><span style=color:#e6db74>${matchingActions.size}</span><span style=color:#e6db74>):&#34;</span>)
</span></span><span style=display:flex><span>matchingActions.forEach { actionId <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>val</span> action = actionManager.getAction(actionId)
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;  - </span><span style=color:#e6db74>$actionId</span><span style=color:#e6db74>: </span><span style=color:#e6db74>${action?.javaClass?.simpleName}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=pattern-4-monitor-log-in-real-time>Pattern 4: Monitor Log in Real-Time</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Terminal 1: Monitor logs</span>
</span></span><span style=display:flex><span>tail -f ~/Library/Logs/JetBrains/TARGET_IDE/idea.log | <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  grep -i --line-buffered <span style=color:#e6db74>&#34;your-plugin\|error\|exception&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Terminal 2: Trigger actions</span>
</span></span><span style=display:flex><span><span style=color:#75715e># (perform actions, modify state, etc.)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># See logs appear in real-time</span>
</span></span></code></pre></div><hr><h2 id=troubleshooting>Troubleshooting</h2><h3 id=target-ide-wont-start>Target IDE Won&rsquo;t Start</h3><p><strong>Check:</strong></p><ol><li>Is a build required first?</li><li>Is config/system directory accessible?</li><li>Are ports available (debug port might be in use)?</li></ol><p><strong>Solution:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Check port availability</span>
</span></span><span style=display:flex><span>lsof -i :5005  <span style=color:#75715e># or whatever debug port</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Kill conflicting process</span>
</span></span><span style=display:flex><span>kill &lt;PID&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Retry launch</span>
</span></span></code></pre></div><h3 id=breakpoints-dont-hit>Breakpoints Don&rsquo;t Hit</h3><p><strong>Reasons:</strong></p><ol><li>Code not executed yet</li><li>Breakpoint in wrong file/line</li><li>Source mismatch (rebuild needed)</li></ol><p><strong>Solution:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#75715e>// Add logging instead
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>println(<span style=color:#e6db74>&#34;DEBUG: Reached this point&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Or use Exception as breakpoint
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>throw</span> RuntimeException(<span style=color:#e6db74>&#34;Debug marker&#34;</span>)
</span></span></code></pre></div><h3 id=no-visible-window>No Visible Window</h3><p><strong>Reason:</strong> Target IDE running headless (no GUI)</p><p><strong>Approach:</strong></p><ul><li>Don&rsquo;t rely on UI automation</li><li>Use programmatic testing</li><li>Monitor logs</li><li>Use state file manipulation</li></ul><p><strong>Verify headless:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>osascript -e <span style=color:#e6db74>&#39;tell application &#34;System Events&#34; to get count of windows of (first process whose name is &#34;java&#34;)&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Output: 0 = headless</span>
</span></span></code></pre></div><h3 id=plugin-classes-not-found>Plugin Classes Not Found</h3><p><strong>Reason:</strong> Dependency issue</p><p><strong>Solution:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Check plugin.xml dependencies</span>
</span></span><span style=display:flex><span>cat plugins/your-plugin/resources/META-INF/plugin.xml | grep -A5 <span style=color:#e6db74>&#34;dependencies&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Verify JARs exist</span>
</span></span><span style=display:flex><span>ls -la out/dev-run/TARGET_IDE/plugins/your-plugin/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check logs</span>
</span></span><span style=display:flex><span>grep <span style=color:#e6db74>&#34;ClassNotFoundException&#34;</span> ~/Library/Logs/JetBrains/TARGET_IDE/idea.log | tail -5
</span></span></code></pre></div><hr><h2 id=best-practices-for-ai-agents>Best Practices for AI Agents</h2><h3 id=1-always-use-async-launch>1. Always Use Async Launch</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#75715e>// GOOD: Async launch
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>ApplicationManager</span>.getApplication().invokeLater {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ProgramRunnerUtil</span>.executeConfiguration(config, executor)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// BAD: Blocking launch
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>ProgramRunnerUtil</span>.executeConfiguration(config, executor)  <span style=color:#75715e>// Blocks forever
</span></span></span></code></pre></div><h3 id=2-wait-for-initialization>2. Wait for Initialization</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#75715e>// Don&#39;t test immediately after launch
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>println(<span style=color:#e6db74>&#34;Launched target IDE, waiting 30s for startup...&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>Thread</span>.sleep(<span style=color:#ae81ff>30</span>_000)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Better: Monitor logs for &#34;Loaded bundled plugins&#34;
</span></span></span></code></pre></div><h3 id=3-check-logs-first>3. Check Logs First</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Before UI automation, check if IDE started correctly</span>
</span></span><span style=display:flex><span>tail -100 ~/Library/Logs/JetBrains/TARGET_IDE/idea.log | <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  grep -i <span style=color:#e6db74>&#34;error\|exception&#34;</span> | <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  wc -l
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># If &gt; 0, investigate before proceeding</span>
</span></span></code></pre></div><h3 id=4-use-multiple-evidence-sources>4. Use Multiple Evidence Sources</h3><pre tabindex=0><code>Process running (ps aux)
Debug connection active (IntelliJ shows it)
Logs show plugin loaded
No errors in logs
State files updated
= High confidence plugin works
</code></pre><h3 id=5-document-everything>5. Document Everything</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span><span style=color:#75715e>## Test: Plugin Feature
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>**Status:** Success
</span></span><span style=display:flex><span><span style=font-weight:700>**Evidence:**</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>-</span> PID: 57870
</span></span><span style=display:flex><span><span style=color:#66d9ef>-</span> Debug port: 60228
</span></span><span style=display:flex><span><span style=color:#66d9ef>-</span> Log excerpt: [attach]
</span></span><span style=display:flex><span><span style=color:#66d9ef>-</span> Screenshot: [attach]
</span></span><span style=display:flex><span><span style=color:#66d9ef>-</span> Conclusion: Plugin functional
</span></span></code></pre></div><hr><h2 id=summary>Summary</h2><p><strong>As an AI Agent, you can:</strong></p><ol><li>Launch IDEs in debug mode programmatically</li><li>Use MCP Steroid to execute code</li><li>Set breakpoints and inspect runtime state</li><li>Take screenshots for visual verification</li><li>Monitor logs in real-time</li><li>Inject code via debugger console</li><li>Test plugins without UI automation</li><li>Modify behavior during debugging</li><li>Collect comprehensive evidence</li><li>Validate functionality programmatically</li></ol><p><strong>Key Tools:</strong></p><ul><li>MCP Steroid (<code>steroid_execute_code</code>, <code>steroid_take_screenshot</code>)</li><li>Debugger console (Evaluate Expression)</li><li>Log monitoring (<code>tail -f idea.log</code>)</li><li>Process inspection (<code>ps aux</code>)</li><li>State file manipulation</li><li>AppleScript (for UI when available)</li></ul><p><strong>Workflow:</strong></p><pre tabindex=0><code>Launch IDE -&gt; Wait for startup -&gt; Set breakpoints -&gt;
Trigger functionality -&gt; Inspect via debugger -&gt;
Monitor logs -&gt; Collect evidence -&gt; Document results
</code></pre><p><strong>Remember:</strong></p><ul><li>Debugging is async - wait for readiness</li><li>Headless mode is common - adapt your approach</li><li>Logs are your best friend</li><li>Multiple evidence sources = high confidence</li><li>Document everything for reproducibility</li></ul></article></div></main><footer><div class=social-links><a href=https://jonnyzzz.com aria-label=jonnyzzz.com target=_blank rel=noopener><svg viewBox="0 0 24 24" fill="currentcolor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93.0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55.0 1-.45 1-1V7h2c1.1.0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41.0 2.08-.8 3.97-2.1 5.39z"/></svg>
</a><a href="https://www.youtube.com/playlist?list=PLitZWClhc4Qgz3w8qrtctMR_lpIc81n0f" aria-label=YouTube target=_blank rel=noopener><svg viewBox="0 0 24 24" fill="currentcolor"><path d="M23.498 6.186A3.016 3.016.0 0021.376 4.05C19.505 3.545 12 3.545 12 3.545s-7.505.0-9.377.505A3.017 3.017.0 00.502 6.186C0 8.07.0 12 0 12s0 3.93.502 5.814a3.016 3.016.0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505.0 9.377-.505a3.015 3.015.0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
</a><a href=https://join.slack.com/t/mcp-steroid/shared_invite/zt-3p3oq91kx-BXJng8GSXveqncFVYWUcpQ aria-label="Join Slack Community" target=_blank rel=noopener><svg viewBox="0 0 24 24" fill="currentcolor"><path d="M5.042 15.165a2.528 2.528.0 01-2.52 2.523A2.528 2.528.0 010 15.165a2.527 2.527.0 012.522-2.52h2.52v2.52zm1.271.0a2.527 2.527.0 012.521-2.52 2.527 2.527.0 012.521 2.52v6.313A2.528 2.528.0 018.834 24a2.528 2.528.0 01-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528.0 01-2.521-2.52A2.528 2.528.0 018.834.0a2.528 2.528.0 012.521 2.522v2.52H8.834zm0 1.271a2.528 2.528.0 012.521 2.521 2.528 2.528.0 01-2.521 2.521H2.522A2.528 2.528.0 010 8.834a2.528 2.528.0 012.522-2.521h6.312zM18.956 8.834a2.528 2.528.0 012.522-2.521A2.528 2.528.0 0124 8.834a2.528 2.528.0 01-2.522 2.521h-2.522V8.834zm-1.268.0a2.528 2.528.0 01-2.523 2.521 2.527 2.527.0 01-2.52-2.521V2.522A2.527 2.527.0 0115.165.0a2.528 2.528.0 012.523 2.522v6.312zM15.165 18.956a2.528 2.528.0 012.523 2.522A2.528 2.528.0 0115.165 24a2.527 2.527.0 01-2.52-2.522v-2.522h2.52zm0-1.268a2.527 2.527.0 01-2.52-2.523 2.526 2.526.0 012.52-2.52h6.313A2.527 2.527.0 0124 15.165a2.528 2.528.0 01-2.522 2.523h-6.313z"/></svg>
</a><a href=https://linkedin.com/in/jonnyzzz aria-label=LinkedIn target=_blank rel=noopener><svg viewBox="0 0 24 24" fill="currentcolor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
</a><a href=https://x.com/jonnyzzz aria-label="X (Twitter)" target=_blank rel=noopener><svg viewBox="0 0 24 24" fill="currentcolor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a></div></footer><script>document.querySelector(".nav-toggle")?.addEventListener("click",function(){const e=document.querySelector(".nav-links"),t=e.classList.toggle("open");this.setAttribute("aria-expanded",t)}),document.addEventListener("keydown",function(e){if(e.key==="Escape"&&document.querySelector(".nav-links.open")){document.querySelector(".nav-links").classList.remove("open");const e=document.querySelector(".nav-toggle");e?.setAttribute("aria-expanded","false"),e?.focus()}})</script></body></html>